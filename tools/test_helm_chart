#!/bin/bash
set -euo pipefail

which helm > /dev/null || echo "Error: Helm is not installed"
which ct > /dev/null || echo "Error: ct is not installed"

cd container/helm

gw_disabled=(--helm-extra-set-args "--set=gateway.enabled=false")
ct_install_args=()
[[ "${1:-lint}" != "lint" ]] && ct_install_args=("${gw_disabled[@]}")
ct "${1:-lint}" --debug --all --config ct.yaml "${ct_install_args[@]}"
