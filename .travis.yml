sudo: required
language: perl
perl:
  - "5.18"
rvm:
  - 2.3
addons: 
    ssh_known_hosts: github.com
env:
  matrix:
    - FULLSTACK=0
    - FULLSTACK=1
  global:
    - COMMIT_AUTHOR_EMAIL: "skynet@open.qa"
addons:
  apt:
    packages:
      - libgmp3-dev
      - libdbus-1-dev
before_install:
  - cpanm local::lib
  - eval "$(perl -Mlocal::lib=${HOME}/perl_modules)"
install:
  - gem install sass
  - cpanm -nq --installdeps --with-feature=coverage .
script:
  - GH_PUBLISH=true bash script/generate-documentation $encrypted_e2c381aa6b8c_key $encrypted_e2c381aa6b8c_iv
  # 'coverage-codecov' calls checkstyle, tests and coverage analysis
  - make coverage-codecov
after_failure:
  - cat /tmp/openqa-debug.log
cache:
  directories:
  - $HOME/perl_modules
